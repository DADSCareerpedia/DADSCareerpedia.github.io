<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Schema | My New Hugo Site</title>
<meta name="keywords" content="EDA, Bonddata">
<meta name="description" content="SQL Database from Electoral Bond Data. The above image shows you all the attributes we are taking into consideration. Lets breifly look what are the conditions 1NF, 2NF, 3NF need to satisfy.
First Normal Form (1NF):
Eliminate duplicate columns from the same table. Create separate tables for related data and identify each row with a unique column or set of columns (primary key). Ensure that each column stores only atomic (indivisible) values.">
<meta name="author" content="">
<link rel="canonical" href="https://dadscareerpedia.github.io/posts/schema/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.f8ab27b7b1bd25584a4af4ff5852b1a844d9436c5ce6a0bf28a65884657f5a82.css" integrity="sha256-&#43;Ksnt7G9JVhKSvT/WFKxqETZQ2xc5qC/KKZYhGV/WoI=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://dadscareerpedia.github.io/favicon.ico">
<link rel="apple-touch-icon" href="https://dadscareerpedia.github.io/apple-touch-icon.png">
<link rel="alternate" hreflang="en" href="https://dadscareerpedia.github.io/posts/schema/">

<meta name="twitter:title" content="Schema | My New Hugo Site" />
<meta name="twitter:description" content="SQL Database from Electoral Bond Data. The above image shows you all the attributes we are taking into consideration. Lets breifly look what are the conditions 1NF, 2NF, 3NF need to satisfy.
First Normal Form (1NF):
Eliminate duplicate columns from the same table. Create separate tables for related data and identify each row with a unique column or set of columns (primary key). Ensure that each column stores only atomic (indivisible) values." />
<meta property="og:title" content="Schema | My New Hugo Site" />
<meta property="og:description" content="SQL Database from Electoral Bond Data. The above image shows you all the attributes we are taking into consideration. Lets breifly look what are the conditions 1NF, 2NF, 3NF need to satisfy.
First Normal Form (1NF):
Eliminate duplicate columns from the same table. Create separate tables for related data and identify each row with a unique column or set of columns (primary key). Ensure that each column stores only atomic (indivisible) values." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://dadscareerpedia.github.io/posts/schema/" />
<meta property="article:section" content="posts" />
  <meta property="article:published_time" content="2024-04-23T08:48:13&#43;05:30" />
  <meta property="article:modified_time" content="2024-04-23T08:48:13&#43;05:30" />


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://dadscareerpedia.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Schema",
      "item": "https://dadscareerpedia.github.io/posts/schema/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Schema | My New Hugo Site",
  "name": "Schema",
  "description": "SQL Database from Electoral Bond Data. The above image shows you all the attributes we are taking into consideration. Lets breifly look what are the conditions 1NF, 2NF, 3NF need to satisfy.\nFirst Normal Form (1NF):\nEliminate duplicate columns from the same table. Create separate tables for related data and identify each row with a unique column or set of columns (primary key). Ensure that each column stores only atomic (indivisible) values.",
  "keywords": [
    "EDA", "Bonddata"
  ],
  "wordCount" : "623",
  "inLanguage": "en",
  "datePublished": "2024-04-23T08:48:13+05:30",
  "dateModified": "2024-04-23T08:48:13+05:30",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://dadscareerpedia.github.io/posts/schema/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "My New Hugo Site",
    "logo": {
      "@type": "ImageObject",
      "url": "https://dadscareerpedia.github.io/favicon.ico"
    }
  }
}
</script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>


<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
            delimiters: [
                {left: "$$", right: "$$", display: true},
                {left: "$", right: "$", display: false}
            ]
        });
    });
</script> 



<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary-bg: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list-page {
                background: var(--theme);
            }

            .list-page:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list-page:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>

</head>

<body class=" type-posts kind-page layout-" id="top"><script data-no-instant>
function switchTheme(theme) {
  switch (theme) {
    case 'light':
      document.body.classList.remove('dark');
      break;
    case 'dark':
      document.body.classList.add('dark');
      break;
    
    default:
      if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
      }
  }
}

function isDarkTheme() {
  return document.body.className.includes("dark");
}

function getPrefTheme() {
  return localStorage.getItem("pref-theme");
}

function setPrefTheme(theme) {
  switchTheme(theme)
  localStorage.setItem("pref-theme", theme);
}

const toggleThemeCallbacks = {}
toggleThemeCallbacks['main'] = (isDark) => {
  
  if (isDark) {
    setPrefTheme('light');
  } else {
    setPrefTheme('dark');
  }
}




window.addEventListener('toggle-theme', function() {
  
  const isDark = isDarkTheme()
  for (const key in toggleThemeCallbacks) {
    toggleThemeCallbacks[key](isDark)
  }
});


function toggleThemeListener() {
  
  window.dispatchEvent(new CustomEvent('toggle-theme'));
}

</script>
<script>
  
  (function() {
    const defaultTheme = 'light';
    const prefTheme = getPrefTheme();
    const theme = prefTheme ? prefTheme : defaultTheme;

    switchTheme(theme);
  })();
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://dadscareerpedia.github.io/" accesskey="h" title="My New Hugo Site (Alt + H)">My New Hugo Site</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://dadscareerpedia.github.io/categories/" title="Categories"
                >Categories
                </a>
            </li>
            <li>
                <a href="https://dadscareerpedia.github.io/tags/" title="Tags"
                >Tags
                </a>
            </li>
            <li>
                <a href="https://dadscareerpedia.github.io/archive/" title="Archive"
                >Archive
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main post">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://dadscareerpedia.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://dadscareerpedia.github.io/posts/">Posts</a></div><h1 class="post-title">Schema</h1>
    <div class="post-meta"><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar" style="user-select: text;"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" style="user-select: text;"></rect><line x1="16" y1="2" x2="16" y2="6" style="user-select: text;"></line><line x1="8" y1="2" x2="8" y2="6" style="user-select: text;"></line><line x1="3" y1="10" x2="21" y2="10" style="user-select: text;"></line></svg>
  <span>April 23, 2024</span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon" style="user-select: text;"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" style="user-select: text;"></path><line x1="7" y1="7" x2="7" y2="7" style="user-select: text;"></line></svg>
  <span class="post-tags"><a href="https://dadscareerpedia.github.io/tags/eda/">EDA</a><a href="https://dadscareerpedia.github.io/tags/bonddata/">Bonddata</a></span></span><span class="meta-item">
  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><circle cx="12" cy="12" r="9"></circle><polyline points="12 7 12 12 15 15"></polyline></svg>
  <span>3 min</span></span>

      
      
    </div>
  </header> 
  <div class="post-content"><h1 id="sql-database-from-electoral-bond-data">SQL Database from Electoral Bond Data.<a hidden class="anchor" aria-hidden="true" href="#sql-database-from-electoral-bond-data">¶</a></h1>
<p><img loading="lazy" src="/img/raw_data.png" type="" alt=""  /></p>
<p>The above image shows you all the attributes we are taking into consideration. Lets breifly look what are the conditions <strong>1NF, 2NF, 3NF</strong> need to satisfy.</p>
<p><strong>First Normal Form (1NF):</strong></p>
<ul>
<li>Eliminate duplicate columns from the same table.</li>
<li>Create separate tables for related data and identify each row with a unique column or set of columns (primary key).</li>
<li>Ensure that each column stores only atomic (indivisible) values.</li>
</ul>
<p><strong>Second Normal Form (2NF):</strong></p>
<ul>
<li>Satisfy 1NF criteria.</li>
<li>Remove partial dependencies by separating out subsets of data that apply to multiple rows.</li>
<li>All non-key attributes must be fully dependent on the primary key.</li>
</ul>
<p><strong>Third Normal Form (3NF):</strong></p>
<ul>
<li>Satisfy 2NF criteria.</li>
<li>Eliminate transitive dependencies by removing columns that are not dependent on the primary key directly.</li>
<li>Every non-key attribute must be dependent only on the primary key and not on other non-key attributes.</li>
</ul>
<p>These conditions help ensure that a database schema is well-structured and avoids common pitfalls like redundancy, partial dependencies, and transitive dependencies. Each normal form builds upon the previous one, aiming to achieve a higher level of data integrity and normalization.</p>
<p><img loading="lazy" src="/img/raw_data_2.png" type="" alt=""  /></p>
<p>If you look the above data you can see that we have Unique_key (Primary Key) and Serial Numbers are unecessary so we are removing it and we can derive the <code>Prefix</code> and <code>BondNumber</code> from the <code>Unique_key</code> columns. So these columns are removed. So all the red colored columns are removed from the data.</p>
<p>Now lets look into our Bankdata.</p>
<p><img loading="lazy" src="/img/bankdata.png" type="" alt=""  /></p>
<p>Even here we had SlNo (Serial Number) column and we can remove it its not needed and we can identitfy the records in this table with <code>Branch Code No</code></p>
<p>Hurray &#x1f603; we have removed data redundant columns. But if you notice there is denominaton colum common in both donors and receivers table.</p>
<p><img loading="lazy" src="/img/raw_data_3.png" type="" alt=""  /></p>
<p>For same <code>Unique_key</code> value we should have same <code>Denomination</code> value. Its like there is a 20Rs &#x1f4b5; Note with unique serial number and I gave it to a shop keeper now the unique serial number and its values are not going to change so based on the serial number once a denomination is associated with it then all the tabels it should have the same.</p>
<p>Now lets say in the donors table there is an error in denomination then i need to change it in two tables and simultaneously I need to make sure that for same  <code>Unique_key</code> value we have same <code>Denomniation</code> value in both the tables all the time. To achive this we are going to remove the Denomination column from both the tables and create a seperate table  with <code>Unique_key</code> and <code>Denominaitons</code> named as bonddata.</p>
<p><img loading="lazy" src="/img/raw_data_4.png" type="" alt=""  /></p>
<p>Now lets look into the code for creating the new bonddata table.</p>
<blockquote>
<p>Note the complete code for this porject is available in the following <a href="https://github.com/DADSCareerpedia/Electoral-Bond-SQL-">git repo</a></p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>alldata_df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(donors_df,reciver_df,how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;outer&#39;</span>,on<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Unique_key&#39;</span>)
</span></span><span style="display:flex;"><span>alldata_df<span style="color:#f92672">.</span>head()
</span></span></code></pre></div><p>we have applied an outer join on both the receivers table and donors table.</p>
<h5 id="why-outer-join">Why outer join?<a hidden class="anchor" aria-hidden="true" href="#why-outer-join">¶</a></h5>
<p>There can be bonds that are bought but not donated and bonds recived but without donors and if you look into the count of records in the donors and receivers table you can get to this conclusion easily as there are 18871 records in donors table and 20471 records in receivers table.</p>
<p>once the join is made let us extract only the columns we are interested.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>bonddata_df <span style="color:#f92672">=</span> alldata_df[[<span style="color:#e6db74">&#39;Unique_key&#39;</span>,<span style="color:#e6db74">&#39;Denominations_x&#39;</span>,<span style="color:#e6db74">&#39;Denominations_y&#39;</span>]] 
</span></span><span style="display:flex;"><span>bonddata_df
</span></span></code></pre></div><p>you have 2 denominations colums one is from donors table and the other is from receivers table.</p>
<p>Now lets merge the colums based on the missing values.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-py" data-lang="py"><span style="display:flex;"><span>bonddata_df[<span style="color:#e6db74">&#39;Denomination&#39;</span>] <span style="color:#f92672">=</span> bonddata_df[<span style="color:#e6db74">&#39;Denominations_x&#39;</span>]<span style="color:#f92672">.</span>fillna(bonddata_df[<span style="color:#e6db74">&#39;Denominations_y&#39;</span>])
</span></span><span style="display:flex;"><span>bonddata_df <span style="color:#f92672">=</span> bonddata_df[[<span style="color:#e6db74">&#39;Unique_key&#39;</span>,<span style="color:#e6db74">&#39;Denomination&#39;</span>]]
</span></span></code></pre></div><p>with these steps we get bonddata table and we can export this to file format of our choice.</p>
<p>We are going to use these 4 tables in our final data model in SQL:</p>
<ol>
<li>bond data</li>
<li>bank data</li>
<li>donor data</li>
<li>receiver data</li>
</ol>
<hr>


  </div>

  <footer class="post-footer">
  </footer>
    <div class="comments-separator"></div>
</article>
    </main>
    
<footer class="footer">
  <span>&copy; 2024 <a href="https://dadscareerpedia.github.io/">My New Hugo Site</a></span><span style="display: inline-block; margin-left: 1em;">
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA</a>
  </span>
  <span style="display: inline-block; margin-left: 1em;">
    Powered by
    <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
    <a href="https://github.com/reorx/hugo-PaperModX/" rel="noopener" target="_blank">PaperModX</a>
  </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
    <path d="M12 6H0l6-6z" />
  </svg>
</a>

<script>
  (function() {
     
    const disableThemeToggle = '' == '1';
    if (disableThemeToggle) {
      return;
    }

    let button = document.getElementById("theme-toggle")
    
    button.removeEventListener('click', toggleThemeListener)
    
    button.addEventListener('click', toggleThemeListener)
  })();
</script>

<script>
  (function () {
    let menu = document.getElementById('menu')
    if (menu) {
      menu.scrollLeft = localStorage.getItem("menu-scroll-position");
      menu.onscroll = function () {
        localStorage.setItem("menu-scroll-position", menu.scrollLeft);
      }
    }

    const disableSmoothScroll = '' == '1';
    const enableInstantClick = '' == '1';
    
    if (window.matchMedia('(prefers-reduced-motion: reduce)').matches || disableSmoothScroll || enableInstantClick) {
      return;
    }
    
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener("click", function (e) {
        e.preventDefault();
        var id = this.getAttribute("href").substr(1);
        document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
          behavior: "smooth"
        });
        if (id === "top") {
          history.replaceState(null, null, " ");
        } else {
          history.pushState(null, null, `#${id}`);
        }
      });
    });
  })();
</script>
<script>
  var mybutton = document.getElementById("top-link");
  window.onscroll = function () {
    if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
      mybutton.style.visibility = "visible";
      mybutton.style.opacity = "1";
    } else {
      mybutton.style.visibility = "hidden";
      mybutton.style.opacity = "0";
    }
  };
</script>
<script>
  if (window.scrollListeners) {
    
    for (const listener of scrollListeners) {
      window.removeEventListener('scroll', listener)
    }
  }
  window.scrollListeners = []
</script>



<script src="/js/medium-zoom.min.js" data-no-instant
></script>




<script>
  
  
  (function() {
    const enableTocScroll = '' == '1'
    if (!enableTocScroll) {
      return
    }
    if (!document.querySelector('.toc')) {
      console.log('no toc found, ignore toc scroll')
      return
    }
    

    
    const scrollListeners = window.scrollListeners
    const headings = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id]');
    const activeClass = 'active';

    
    let activeHeading = headings[0];
    getLinkByHeading(activeHeading).classList.add(activeClass);

    const onScroll = () => {
      const passedHeadings = [];
      for (const h of headings) {
        
        if (getOffsetTop(h) < 5) {
          passedHeadings.push(h)
        } else {
          break;
        }
      }
      if (passedHeadings.length > 0) {
        newActiveHeading = passedHeadings[passedHeadings.length - 1];
      } else {
        newActiveHeading = headings[0];
      }
      if (activeHeading != newActiveHeading) {
        getLinkByHeading(activeHeading).classList.remove(activeClass);
        activeHeading = newActiveHeading;
        getLinkByHeading(activeHeading).classList.add(activeClass);
      }
    }

    let timer = null;
    const scrollListener = () => {
      if (timer !== null) {
        clearTimeout(timer)
      }
      timer = setTimeout(onScroll, 50)
    }
    window.addEventListener('scroll', scrollListener, false);
    scrollListeners.push(scrollListener)

    function getLinkByHeading(heading) {
      const id = encodeURI(heading.getAttribute('id')).toLowerCase();
      return document.querySelector(`.toc ul li a[href="#${id}"]`);
    }

    function getOffsetTop(heading) {
      if (!heading.getClientRects().length) {
        return 0;
      }
      let rect = heading.getBoundingClientRect();
      return rect.top
    }
  })();
  </script>

</body>

</html>
